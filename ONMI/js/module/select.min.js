import{addClass,removeClass,toggleClass}from"./handleClassnames.js";const getCountries=async()=>{const e=await fetch("https://countryapi.io/api/region/europe?apikey=gS9blfQayyTuKHunSkQbOlEzeNQbrtU3PLRcPMTg"),t=await e.json();return await t},createOption=(e,t)=>{const s=document.createElement("li");s.className="select__elem",s.innerHTML=`\n  <input class="select__checkbox" name="country" value="${e}" type="radio">\n  <div class="select__option">${e}</div>\n  `,t.appendChild(s)};export const createCountrySelect=async()=>{const e=document.querySelector("#country").querySelector(".select__list");Object.values(await getCountries()).map((e=>e.name)).sort().sort().forEach((t=>{createOption(t,e)}))};export const selectInit=()=>{createCountrySelect();const e=document.querySelectorAll(".select");e.forEach((e=>{e.addEventListener("click",(t=>{t.target.closest(".select__header")&&(t.stopPropagation(),toggleClass(e,"show")),t.target.closest(".select__checkbox")&&(t.stopPropagation(),addClass(e,"selected"),e.querySelector(".select__value").textContent=t.target.value,removeClass(e,"show"))}))})),document.addEventListener("click",(t=>{if(t.target.closest(".select"))return null;e.forEach((e=>{removeClass(e,"show")}))}))};