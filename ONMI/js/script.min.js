"use strict";import{sliderInit}from"./module/sliderInit.min.js";import{splitText}from"./module/splitText.min.js";import{setStyle}from"./module/setStyle.min.js";import{sectionHeightInit}from"./module/sectionHeightInit.min.js";import{animTextLine,drawSvgLine,fadeDown,fadeIn,fadeUp,horizontalTransform,leftToRight,lineShow,opacityIn,readText,scalingFoo,svgDraw,verticalTransform}from"./module/GSAPAnim.js";import{cardsAdaptive,journeyCardsAdaptive}from"./module/adaptiveResize.min.js";import{getPopulation}from"./module/getPopulation.min.js";const initPage=()=>{const e=window.innerWidth,t=document.querySelector("#video_phone"),r=document.querySelector("#video_trap"),o=document.querySelectorAll(".text-line"),n=document.querySelectorAll(".readed-text"),i=(document.querySelector(".each-point"),document.querySelector(".mask")),a=document.querySelectorAll(".each-point__mark"),l=document.querySelectorAll('[data-effect="line"]'),d=document.querySelectorAll('[data-effect="opacity"]'),c=document.querySelector(".card_1 .card__front-aura"),s=document.querySelector(".card_3 .card__front-img"),u=document.querySelector(".card_2 .card__front-img"),m=document.querySelector(".card__front-img_bg"),p=document.querySelector(".omies__circles"),v=document.querySelector(".omies__circle_1"),_=document.querySelector(".omies__circle_3"),f=document.querySelectorAll('[data-effect="fade-down"]'),g=document.querySelectorAll('[data-effect="fade-in"]'),y=document.querySelector(".description-reality__content"),h=document.querySelector(".platform__btn_google"),w=document.querySelector(".platform__btn_apple"),S=document.querySelector(".mission__line"),q=document.querySelector(".mission__line_diagonally line"),T=document.querySelector(".reality__screens"),E=document.querySelector(".reality__screen_1"),L=document.querySelector(".reality__screen_3"),b=document.querySelectorAll(".question-item"),x=document.querySelectorAll('[data-effect="fade-up"]'),A=document.querySelectorAll(".line"),I=document.querySelector("#video-scroll"),j=document.querySelector(".journey-card__phone"),P=document.querySelector(".journey-card_2 .journey-card__omi"),z=document.querySelector(".journey-card_4 .card__front-img_bg"),C=document.querySelector(".security"),k=document.querySelector(".pvp-pose_1"),W=document.querySelector(".pvp-pose_2");document.querySelectorAll(".marquee3k");if(gsap.registerPlugin(ScrollTrigger),verticalTransform(u,u,"-5%","5%",!0),verticalTransform(m,m,"-5%","5%",!0),verticalTransform(j,j,"5%","-10%",!0),verticalTransform(P,P,"-5%","5%",!0),verticalTransform(z,z,"-5%","5%",!0),verticalTransform(C,C,"-10%","5%",!0),verticalTransform(k,k,"5%","-5%",!0),verticalTransform(W,W,"-5%","5%",!0),horizontalTransform(v,p,"100%","33%"),horizontalTransform(_,p,"-100%","-43%"),horizontalTransform(s,s,"-3%","3%"),horizontalTransform(E,T,"17.5vw","0",!0,null,"top bottom","top+=25% center"),horizontalTransform(L,T,"-17.5vw","0",!0,null,"top bottom","top+=25% center"),scalingFoo(c,c,1,1.4,"top bottom+=25%","center top",!0),scalingFoo(".roadmap__title",".roadmap",1.7,1,"top bottom","15% center",!0),scalingFoo(".pvp__title",".pvp__descr",1.7,1,"top bottom","50% center",!0),leftToRight(S,".mission"),svgDraw(q,q,"400%"),i&&drawSvgLine(i,".each-point__route",a),I?.duration>0){gsap.timeline({defaults:{duration:1},scrollTrigger:{trigger:I,start:"top bottom",end:"center center",scrub:!0,onUpdate:e=>{const t=e.progress.toFixed(2),r=I.duration;I.currentTime=(r*t).toFixed(2)}}})}ScrollTrigger.create({trigger:".description-reality",pinned:!0,start:"top top",end:"bottom bottom",onToggle:e=>{return t=y,void(e.isActive?(t.classList.add("show"),t.classList.remove("hide")):(t.classList.add("hide"),t.classList.remove("show")));var t}});const D=e=>{e.style.width="120%",e.style.borderRadius="15.10vw"},M=e=>{e.style.width="80%"},F=e=>{e.style.width="100%"},R=()=>{F(w),F(h)},H=()=>{D(h),M(w)},B=()=>{D(w),M(h)};{let t="0.52vw";const r=()=>{const e=window.innerWidth;t=e<=568?"11.52vw":"0.52vw"};r();const o={slidesPerView:"auto",spaceBetween:20,grabCursor:!0,speed:600,effect:"creative",parallax:!0,creativeEffect:{limitProgress:2,prev:{shadow:!0,translate:[0,0,-400],scale:[0],opacity:0},next:{translate:[`calc(100% + ${t})`,0,0]}},breakpoints:{568:{slidesPerView:"auto",spaceBetween:10}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},n=sliderInit(".adventure__phone"),i=sliderInit(".cards-slider__slider",o);i.controller.control=n;const a=()=>{let t="7vw";e>992?t="8.8vw":e<768&&(t=0);const r=i.slides,o=r[r.length-1];i.activeIndex===r.length-1?(o.style.right=t,o.style.transotionDuration="600ms"):(o.style.right="0vw",o.style.transotionDuration="600ms")};i.on("slideChange",(function(){const e=document.querySelector(".adventure__phone-hand");a(),i.slides.length-1===i.activeIndex?e.classList.add("show"):e.classList.remove("show")}));const l=sliderInit(".level-slider",{centeredSlides:!0,slidesPerView:"auto",loopPreventsSliding:!0,speed:800,loop:!1,navigation:{nextEl:".level-slider__arrow_next",prevEl:".level-slider__arrow_prev"},pagination:{el:".swiper-pagination"},breakpoints:{568:{loop:!0}}});window.addEventListener("resize",(()=>{r(),l.update()}))}o.forEach((e=>{setStyle(e,e.dataset),animTextLine(e,e.parentElement)})),n.forEach((e=>{splitText(e);const t=e.querySelectorAll(".word");readText(t,e)})),l.forEach((e=>{lineShow(e)})),d.forEach((e=>{opacityIn(e)})),f.forEach((e=>{fadeDown(e)})),g.forEach((e=>{fadeIn(e)})),A.forEach((e=>{leftToRight(e)})),b.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();t.target.closest(".question-item__header")&&e.classList.toggle("open")}))})),x.forEach((e=>{fadeUp(e)})),e>768&&(w.addEventListener("mouseenter",B),h.addEventListener("mouseenter",H),w.addEventListener("mouseleave",R),h.addEventListener("mouseleave",R),Marquee3k&&Marquee3k.init()),t?.currentTime>0&&t?.play(),r?.currentTime>0&&r?.play(),sectionHeightInit(),cardsAdaptive(),journeyCardsAdaptive()},waves=new SineWaves({el:document.getElementById("waves"),speed:5,width:function(){return window.innerWidth},height:function(){return window.innerHeight},wavesWidth:"95%",ease:"SineInOut",waves:[{timeModifier:1,lineWidth:3,amplitude:150,wavelength:200,segmentLength:20},{timeModifier:1,lineWidth:2,amplitude:150,wavelength:100},{timeModifier:1,lineWidth:1,amplitude:-150,wavelength:50,segmentLength:10},{timeModifier:1,lineWidth:.5,amplitude:-100,wavelength:100,segmentLength:10}],initialize:function(){},resizeEvent:function(){let e=this.ctx.createLinearGradient(0,0,this.width,0);e.addColorStop(0,"rgba(0, 0, 0, 0)"),e.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),e.addColorStop(1,"rgba(0, 0, 0, 0)");let t=-1,r=this.waves.length;for(;++t<r;)this.waves[t].strokeStyle=e;t=void 0,r=void 0,e=void 0}}),asyncInit=async()=>{const e=document.querySelector("#population"),t=JSON.parse(await getPopulation());e.textContent=t.readable_format||"8,323,444,222"};document.addEventListener("DOMContentLoaded",(()=>{initPage(),asyncInit()})),window.addEventListener("resize",(()=>{waves.update(),cardsAdaptive(),journeyCardsAdaptive()}));