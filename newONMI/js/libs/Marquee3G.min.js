class Marquee{constructor(e){this.element=e.element,this.gsap=e.gsap,this.originalContent=this.element.children[0],this.destroy=this.destroy.bind(this),this.setInstanceBounds(),this.calculateRepetition(),this.createWrapper(),this.cloneNodes(),this.animate(),this.handleResize()}setInstanceBounds(){this.originalContent.style.display="inline-block",this.bounds={element:this.element.getBoundingClientRect(),content:this.element.querySelector(".marquee-container").getBoundingClientRect()}}calculateRepetition(){const e=(this.bounds.element.width+this.bounds.content.width)/this.bounds.content.width;this.repetitions=Math.ceil(e),console.log(`Required repetitions: ${this.repetitions}`)}getChildren(){if(this.element.children.length>1)throw"There is more than one child. Please only have one wrapper with `.marquee-container` selector.";{const e=this.element.children[0];return e.classList.add("marquee-copy"),e}}createWrapper(){const e=document.createElement("div");e.classList.add("marquee-wrapper"),e.style.whiteSpace="nowrap",this.element.appendChild(e),this.element.style.overflow="hidden",this.wrapper=e}cloneNodes(e){[...Array(e||this.repetitions)].map(((e,t)=>{const i=this.originalContent.cloneNode(!0);return this.wrapper.appendChild(i),i})),e||this.originalContent.remove()}animate(){this.timeline&&this.timeline.kill();const e=new this.gsap({onComplete:()=>{e.restart()}});e.set(this.wrapper,{x:0}),e.to(this.wrapper,2,{x:-1*this.bounds.content.width,force3D:!0,ease:Power0.easeNone}),this.timeline=e}refresh(){const e=this.repetitions;this.calculateRepetition();const t=this.repetitions-e;t>0&&this.cloneNodes(t),this.setInstanceBounds(),this.animate()}handleResize(){window.addEventListener("resize",debounce((()=>{this.refresh()}),50))}destroy(){this.timeline.kill(),this.element.children[0].remove(),this.element.append(this.originalContent),delete window.marquees[this.name||this.index]}static init(e){window.Marquees={};[...document.querySelectorAll(e.selector||".marquee")].forEach(((t,i)=>{const n=new Marquee({element:t,gsap:e.gsap});n.index=i,window.Marquees[i]=n}))}}function debounce(e,t,i){let n;return function(){const s=this,o=arguments,r=function(){n=null,i||e.apply(s,o)},l=i&&!n;clearTimeout(n),n=setTimeout(r,t),l&&e.apply(s,o)}}export default Marquee;