"use strict";import{sliderInit}from"./module/sliderInit.js";import{splitText}from"./module/splitText.js";import{setStyle}from"./module/setStyle.js";import{sectionHeightInit}from"./module/sectionHeightInit.js";import{circleDraw,fadeDown,fadeIn,fadeUp,flipAnim,hideElem,leftToRight,lineShow,opacityIn,pointShow,rightToLeft,scaling,scalingPositive,showElem,topToBottom,transformTop}from"./module/GSAPAnim.js";import{CalcStats}from"./module/calcScore.js";import{random}from"./module/random.js";window.onload=function(){(()=>{sessionStorage.getItem("isFirstLoad")?(!function(){const e=document.querySelectorAll(".header [data-effect]"),t=document.querySelectorAll(".hero [data-effect]"),o=document.querySelectorAll(".fixed-btns__app");e.forEach((e=>{e.dataset.effect=""})),t.forEach((e=>{e.dataset.effect=""})),o.forEach(((e,t)=>{e.dataset.delay=.1*t}))}(),console.log("second")):sessionStorage.setItem("isFirstLoad",!0);const e=document.querySelectorAll("[data-delay]"),t=document.querySelectorAll("[data-duration]");for(let t of e)setStyle(t,t.dataset);for(let e of t)setStyle(e,e.dataset);{const e={slidesPerView:"auto",spaceBetween:10,grabCursor:!0,speed:600,effect:"creative",parallax:!0,creativeEffect:{limitProgress:2,prev:{shadow:!0,translate:[0,0,-400],scale:[0],opacity:0},next:{translate:["calc(100% + 0.52vw)",0,0]}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},t=sliderInit(".adventure__phone"),o=sliderInit(".cards-slider__slider",e);o.controller.control=t;const r=()=>{const e=o.slides,t=e[e.length-1];o.activeIndex===e.length-1?(t.style.right="9.7vw",t.style.transotionDuration="600ms"):(t.style.right="0vw",t.style.transotionDuration="600ms")};o.on("slideChange",(function(){r()}))}document.querySelectorAll(".animate-letters").forEach((e=>{splitText(e)}));document.querySelectorAll(".animate-text").forEach((e=>{splitText(e)}));document.querySelectorAll(".title-line").forEach((e=>{splitText(e)})),sectionHeightInit();const o=document.querySelector(".omi-card__handle"),r=document.querySelector("#unallocated-points");const a=new CalcStats(12,10,23.4,2.1,2.1,56);a.render(),o.addEventListener("click",(async e=>{const t=e.target,o=t.closest(".omi-card__point-btn");if(o){const e=document.createElement("span");e.className="scalingBlock",e.setAttribute("data-id",1),r.append(e),await scalingPositive(".scalingBlock"),e.remove();const l=o.getAttribute("data-stat");t.classList.contains("btn-plus")?a.statPlus(l):t.classList.contains("btn-minus")&&a.statMinus(l)}})),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),1!==ScrollTrigger.isTouch&&ScrollSmoother.create({smooth:1.3,effects:!0,smoothTouch:.3});const l=document.querySelectorAll('[data-effect="line"]'),c=document.querySelectorAll('[data-effect="opacity"]');l.forEach((e=>{lineShow(e)})),c.forEach((e=>{opacityIn(e)}));const i=document.querySelectorAll(".find-map__point .map-point__circle"),s=document.querySelectorAll(".find-map__point .map-point__text");i.forEach((e=>{const t=e.getAttribute("data-delay")?e.getAttribute("data-delay"):0,o=e.getAttribute("data-duration")?e.getAttribute("data-duration"):1.2;gsap.fromTo(e,{opacity:0},{opacity:1,delay:t,duration:o,ease:"power1.inOut",scrollTrigger:{trigger:".find-map",start:"top center"}})})),s.forEach((e=>{const t=e.getAttribute("data-delay")?e.getAttribute("data-delay"):0,o=e.getAttribute("data-duration")?e.getAttribute("data-duration"):1.2;gsap.fromTo(e,{opacity:0,y:"80%"},{y:0,opacity:1,delay:t,duration:o,ease:"power1.inOut",scrollTrigger:{trigger:".find-map",start:"top center"}})}));document.querySelectorAll(".descover__map .map-point__circle").forEach((e=>{const t=e.getAttribute("data-delay")?e.getAttribute("data-delay"):0,o=e.getAttribute("data-duration")?e.getAttribute("data-duration"):1.2;gsap.fromTo(e,{opacity:0},{opacity:1,delay:t,duration:o,ease:"power1.inOut",scrollTrigger:{trigger:".descover__map",start:"top top"}})}));const n=document.querySelector("[data-effect='slide-top-absolute']");n&&transformTop(n);const d=document.querySelectorAll('[data-effect="fade-down"]'),u=document.querySelectorAll('[data-effect="fade-in"]');d.forEach((e=>{fadeDown(e)})),u.forEach((e=>{fadeIn(e)}));document.querySelectorAll(".flip").forEach((e=>{flipAnim(e)}));const m=document.querySelector(".description-reality__content");ScrollTrigger.create({trigger:".description-reality",pinned:!0,start:"top top",end:"bottom bottom",marker:!0,onToggle:e=>{return t=m,o=e.isActive,void(t.style.opacity=o?1:0);var t,o}});gsap.fromTo(".pvp__title",{scale:1.7},{scale:1,scrollTrigger:{trigger:".pvp",start:"top center",end:"center+=5.21vw center",scrub:!0},ease:"none"}),gsap.fromTo(".collection__title",{x:"18%"},{x:"-20%",scrollTrigger:{trigger:".collection__title",start:"top bottom",end:"bottom",scrub:!0}}),Marquee3k.init(),gsap.fromTo(".hunger-games__title",{scale:1.7},{scale:1,scrollTrigger:{trigger:".hunger-games",start:"top bottom",end:"15% center",scrub:!0},ease:"none"}),gsap.utils.toArray(".hunger-games__map-point").forEach((e=>{e.dataset.delay=random(0,1).toFixed(2),pointShow(e,".hunger-games__map")}));const g=document.querySelector(".mission__line");var p=document.querySelector(".mission__line_diagonally line");gsap.to(p,{strokeDashoffset:"400%",duration:1.2,scrollTrigger:{trigger:p}}),gsap.fromTo(g,{width:"0px"},{width:"100%",ease:"power1.inOut",scrollTrigger:{trigger:".mission"}}),gsap.utils.toArray(".roadmap-item__line").forEach((e=>{leftToRight(e)})),gsap.utils.toArray(".security__row-line").forEach((e=>{leftToRight(e)})),gsap.utils.toArray(".team__row-line").forEach((e=>{leftToRight(e)})),gsap.fromTo(".roadmap__title",{scale:1.7},{scale:1,scrollTrigger:{trigger:".roadmap",start:"top bottom",end:"15% center",scrub:!0},ease:"none"});{const e=document.querySelectorAll(".vacancy__tabs-tab"),t=document.querySelectorAll(".vacancy__tabs-body"),o=()=>{e.forEach((e=>e.classList.remove("current")))},r=()=>{t.forEach((e=>e.classList.remove("show")))};e.forEach(((e,a)=>{e.addEventListener("click",(l=>{if(l.preventDefault(),e.closest(".current"))return;o(),e.classList.add("current");const c=document.querySelector(".vacancy__tabs-body.show"),i=t[a];hideElem(c),r(),i.classList.add("show"),showElem(i)}))})),gsap.utils.toArray(".vacancy__header-line").forEach((e=>{rightToLeft(e)}));const a=document.querySelector(".vacancy__header-line");leftToRight(a)}document.querySelectorAll(".question-item").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();t.target.closest(".question-item__header")&&e.classList.toggle("open")}))})),gsap.utils.toArray(".question-item__line").forEach((e=>{leftToRight(e)})),gsap.utils.toArray('[data-effect="draw-line"]').forEach((e=>{leftToRight(e)}));document.querySelectorAll('[data-effect="fade-up"]').forEach((e=>{fadeUp(e)}));document.querySelectorAll('[data-effect="scaling"]').forEach((e=>{scaling(e)}));document.querySelector(".platform__btns");const f=e=>{e.style.width="120%",e.style.borderRadius="15.10vw"},y=e=>{e.style.width="80%"},h=e=>{e.style.width="100%"},_=()=>{h(A),h(S)},S=document.querySelector(".platform__btn_google"),A=document.querySelector(".platform__btn_apple");A.addEventListener("mouseenter",(()=>{f(A),y(S)})),S.addEventListener("mouseenter",(()=>{f(S),y(A)})),A.addEventListener("mouseleave",_),S.addEventListener("mouseleave",_);const v=document.querySelectorAll(".svg-circle circle"),E=document.querySelector(".token");v.forEach((e=>{circleDraw(e,E)}))})()};