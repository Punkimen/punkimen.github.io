"use strict";import{sliderInit}from"./module/sliderInit.min.js";import{setHeader}from"./module/setHeader.min.js";import{sectionHeightInit}from"./module/sectionHeightInit.min.js";import{scalingFoo,verticalTransform}from"./module/GSAPAnim.js";import{cardsAdaptive,journeyCardsAdaptive}from"./module/adaptiveResize.min.js";import{addClass,toggleClass,removeClass}from"./module/handleClassnames.min.js";import{scrollTrigger}from"./module/ScrollTrigger.min.js";import{seeMore}from"./module/seeMore.js";import{selectInit}from"./module/select.js";let windowWidth=window.innerWidth;const createScript=(e,t)=>{const o=document.createElement("script");return o.setAttribute("src",t),o.setAttribute("id",e),o.setAttribute("type","module"),o.setAttribute("defer",""),o},addScripts=e=>{e>768?document.querySelector("#scriptDesktop")||document.body.append(createScript("scriptDesktop","js/scriptDesktop.min.js")):(document.querySelector("#scriptMob")||document.body.append(createScript("scriptMob","js/scriptMob.min.js")),document.querySelector("#scriptDesktop")&&(document.querySelector("#scriptDesktop").remove(),location.reload()))};addScripts(windowWidth);const logo=document.querySelector(".header__logo"),firstParenLine=document.querySelectorAll(".parent-line.first-load"),firstTextLine=document.querySelectorAll(".text-line.first-load"),firstOpacityElems=document.querySelectorAll('[data-effect="opacity"].first-load'),firstFadeOpacityElems=document.querySelectorAll('[data-effect="fade-down"].first-load'),textLine=document.querySelectorAll(".text-line:not(.first-load)"),opacityElems=document.querySelectorAll('[data-effect="opacity"]:not(.first-load)'),fadeOpacityElems=document.querySelectorAll('[data-effect="fade-down"]:not(.first-load)'),pinEl=document.querySelector(".description-reality__content"),btnGooglePlay=document.querySelector(".platform__btn_google"),btnApplePlay=document.querySelector(".platform__btn_apple"),marqueeLines=document.querySelectorAll(".marquee3k"),quests=document.querySelectorAll(".question-item"),lines=document.querySelectorAll(".line"),securityBlock=document.querySelector(".security"),pvpPose1=document.querySelector(".pvp-pose_1"),pvpPose2=document.querySelector(".pvp-pose_2"),heroPose=document.querySelector(".hero__pose"),video1=document.querySelector("#video_phone"),openElems=document.querySelectorAll("[data-open]"),closeElems=document.querySelectorAll(".modal__close"),burger=document.querySelector(".header__burger"),mobMenu=document.querySelector(".mob-menu"),modal=document.querySelector(".modal"),roadmapBtn=document.querySelector(".roadmap__btn"),roadmapContent=document.querySelector(".roadmap__content");sectionHeightInit(windowWidth),gsap.registerPlugin(ScrollTrigger),scrollTrigger(firstParenLine),scrollTrigger(firstTextLine),scrollTrigger(firstOpacityElems),scrollTrigger(firstFadeOpacityElems);const showEl=(e,t)=>{t?(e.classList.add("show"),e.classList.remove("hide")):(e.classList.add("hide"),e.classList.remove("show"))},sliderPrety=e=>{let t="7vw";windowWidth>992?t="8.8vw":windowWidth<768&&(t=0);const o=e.slides,r=o[o.length-1];e.activeIndex===o.length-1?(r.style.right=t,r.style.transotionDuration="600ms"):(r.style.right="0vw",r.style.transotionDuration="600ms")},scalingBtnPositive=e=>{e.style.width="120%",e.style.borderRadius="15.10vw"},scalingBtnNegative=e=>{e.style.width="80%"},setNormalSize=e=>{e.style.width="100%"},leveSizeBtns=()=>{setNormalSize(btnApplePlay),setNormalSize(btnGooglePlay)},hoverGoogleBtn=()=>{scalingBtnPositive(btnGooglePlay),scalingBtnNegative(btnApplePlay)},hoverAppleBtn=()=>{scalingBtnPositive(btnApplePlay),scalingBtnNegative(btnGooglePlay)},descrReality=e=>{e>768?gsap.to(".description-reality",{ease:"none",scrollTrigger:{trigger:".description-reality",pinned:!0,start:"top top",end:"bottom bottom",onToggle:e=>showEl(pinEl,e.isActive)}}):gsap.to(".description-reality",{ease:"none",scrollTrigger:{trigger:".description-reality",pinned:!0,start:"top top",end:"bottom+=10% bottom",onToggle:e=>showEl(pinEl,e.isActive)}})};verticalTransform(heroPose,heroPose,"-15%","0%",!0,"top center+=35%","bottom top");const initPage=()=>{heroPose.style.opacity=1,seeMore(),selectInit(),modal.style.display="block",gsap.registerPlugin(ScrollTrigger),ScrollTrigger.refresh(),roadmapBtn&&roadmapBtn.addEventListener("click",(e=>{toggleClass(roadmapContent,"show"),ScrollTrigger.refresh(),roadmapContent.remove()})),logo.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),descrReality(windowWidth),verticalTransform(pvpPose1,pvpPose1,"5%","-5%",!0),verticalTransform(pvpPose2,pvpPose2,"-5%","5%",!0),windowWidth>568&&scalingFoo(".pvp__title",".pvp__descr",1.7,1,"top-=25% bottom","50% center",!0),scrollTrigger(textLine),scrollTrigger(opacityElems),scrollTrigger(fadeOpacityElems),scrollTrigger(lines),quests.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();t.target.closest(".question-item__header")&&e.classList.toggle("open")}))})),Marquee3k&&Marquee3k.init(),Marquee3k.pauseAll(),marqueeLines.forEach(((e,t)=>{gsap.to(e,{ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",onToggle:e=>{e.isActive?Marquee3k.play(t):Marquee3k.pauseAll()}}})})),windowWidth>768&&(btnApplePlay.addEventListener("mouseenter",hoverAppleBtn),btnGooglePlay.addEventListener("mouseenter",hoverGoogleBtn),btnApplePlay.addEventListener("mouseleave",leveSizeBtns),btnGooglePlay.addEventListener("mouseleave",leveSizeBtns)),video1&&video1?.currentTime>0&&video1?.play(),burger.addEventListener("click",(e=>{e.preventDefault(),toggleClass(burger,"active"),toggleClass(mobMenu,"show"),toggleClass(document.body,"overflow")}));{let e="0.52vw";const t=()=>{e=windowWidth<=568?"11.52vw":"0.52vw"};t();const o={slidesPerView:"auto",spaceBetween:20,grabCursor:!0,speed:600,effect:"creative",parallax:!0,creativeEffect:{limitProgress:2,prev:{shadow:!0,translate:[0,0,-400],scale:[0],opacity:0},next:{translate:[`calc(100% + ${e})`,0,0]}},breakpoints:{568:{slidesPerView:"auto",spaceBetween:10}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},r=sliderInit(".adventure__phone"),i=sliderInit(".cards-slider__slider",o);i.controller.control=r,i.on("slideChange",(function(){const e=document.querySelector(".adventure__phone-hand");document.querySelector(".adventure__phone-phone");sliderPrety(i),i.slides.length-1===i.activeIndex?e.classList.add("show"):e.classList.remove("show")})),window.addEventListener("resize",(()=>{t()}))}openElems.forEach((e=>{e.addEventListener("click",(t=>{const o=document.querySelector(e.dataset.open);addClass(o,"show"),addClass(document.body,"overflow")}))})),closeElems.forEach((e=>{e.addEventListener("click",(t=>{const o=e.parentElement;removeClass(o,"show"),removeClass(document.body,"overflow")}))})),cardsAdaptive(windowWidth),journeyCardsAdaptive(windowWidth)};document.addEventListener("DOMContentLoaded",(()=>{initPage()})),window.addEventListener("resize",(()=>{descrReality(windowWidth),addScripts(windowWidth),windowWidth=window.innerWidth,sectionHeightInit(windowWidth),cardsAdaptive(windowWidth),journeyCardsAdaptive(windowWidth)}));let lastScrollTop=0;window.addEventListener("scroll",(function(){let e=window.pageYOffset||document.documentElement.scrollTop;e>lastScrollTop&&lastScrollTop>window.innerHeight/8?setHeader(!0):0===e&&setHeader(!1),lastScrollTop=e<=0?0:e}),!1);