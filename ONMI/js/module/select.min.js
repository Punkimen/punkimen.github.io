import{addClass,removeClass,toggleClass}from"./handleClassnames.js";export const getCountries=async()=>{const e=await fetch("https://countryapi.io/api/region/europe?apikey=gS9blfQayyTuKHunSkQbOlEzeNQbrtU3PLRcPMTg"),t=await e.json();return await t};const createOption=(e,t)=>{const s=document.createElement("li");s.className="select__elem",s.innerHTML=`\n  <input class="select__checkbox" name="country" value="${e}" type="radio">\n  <div class="select__option">${e}</div>\n  `,t.appendChild(s)};export const createCountrySelect=e=>{const t=document.querySelector("#country").querySelector(".select__list");t.innerHTML="",e.forEach((e=>{createOption(e,t)}))};export const selectInit=async()=>{const e=document.querySelector("#country-search"),t=Object.values(await getCountries()).map((e=>e.name)).sort();createCountrySelect(t);const s=document.querySelectorAll(".select");s.forEach((s=>{s.addEventListener("click",(c=>{c.target.closest(".select__header")&&(c.stopPropagation(),toggleClass(s,"show")),c.target.closest(".select__checkbox")&&(c.stopPropagation(),addClass(s,"selected"),s.querySelector(".select__value").textContent=c.target.value,removeClass(s,"show"),createCountrySelect(t),e.value="")}))})),document.addEventListener("click",(e=>{if(e.target.closest(".select"))return null;s.forEach((e=>{removeClass(e,"show")}))}))};