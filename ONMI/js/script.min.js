"use strict";import{sliderInit}from"./module/sliderInit.js";import{splitText}from"./module/splitText.js";import{setStyle}from"./module/setStyle.js";import{sectionHeightInit}from"./module/sectionHeightInit.js";import{fadeDown,fadeIn,fadeUp,flipAnim,hideElem,leftToRight,lineShow,opacityIn,pointShow,rightToLeft,scaling,scalingPositive,showElem,topToBottom,transformTop}from"./module/GSAPAnim.js";import{CalcStats}from"./module/calcScore.js";window.onload=function(){(()=>{document.querySelectorAll(".animate");const t=document.querySelectorAll("[data-delay]"),e=document.querySelectorAll("[data-duration]");for(let e of t)setStyle(e,e.dataset);for(let t of e)setStyle(t,t.dataset);{const t={slidesPerView:"auto",spaceBetween:10,grabCursor:!0,speed:600,effect:"creative",parallax:!0,creativeEffect:{limitProgress:2,prev:{shadow:!0,translate:[0,0,-400],scale:[0],opacity:0},next:{translate:["calc(100% + 10px)",0,0]}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},e=sliderInit(".adventure__phone"),o=sliderInit(".cards-slider__slider",t);o.controller.control=e;const r=()=>{const t=o.slides,e=t[t.length-1];o.activeIndex===t.length-1?(e.style.right="9.7vw",e.style.transotionDuration="600ms"):(e.style.right="0vw",e.style.transotionDuration="600ms")};o.on("slideChange",(function(){r()}));const a=sliderInit(".create-omi__slider",{slidesPerView:5,centeredSlides:!0,loop:!0,allowTouchMove:!1,navigation:{nextEl:".create-omi__btn_next",prevEl:".create-omi__btn"}}),i=()=>{const t=a.slides,e=a.activeIndex;t[e].style.opacity=1;const o=o=>{let r=[];return r.push(t[e-o]),r.push(t[e+o]),r},r=o(1),i=o(2);r.forEach((t=>{t.style.opacity=.3})),i.forEach((t=>{t.style.opacity=.15}))};a.on("slideChange",(function(){i()})),i()}document.querySelectorAll(".animate-letters").forEach((t=>{splitText(t)}));document.querySelectorAll(".animate-text").forEach((t=>{splitText(t)}));document.querySelectorAll(".title-line").forEach((t=>{splitText(t)})),sectionHeightInit();const o=document.querySelector(".omi-card__handle"),r=document.querySelector("#unallocated-points");const a=new CalcStats(12,10,23.4,2.1,2.1,56);a.render(),o.addEventListener("click",(async t=>{const e=t.target,o=e.closest(".omi-card__point-btn");if(o){const t=document.createElement("span");t.className="scalingBlock",t.setAttribute("data-id",1),r.append(t),await scalingPositive(".scalingBlock"),t.remove();const i=o.getAttribute("data-stat");e.classList.contains("btn-plus")?a.statPlus(i):e.classList.contains("btn-minus")&&a.statMinus(i)}})),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),1!==ScrollTrigger.isTouch&&ScrollSmoother.create({smooth:1.3,effects:!0,smoothTouch:.3});const i=document.querySelectorAll('[data-effect="line"]'),l=document.querySelectorAll('[data-effect="opacity"]');i.forEach((t=>{lineShow(t)})),l.forEach((t=>{opacityIn(t)}));const c=document.querySelectorAll(".find-map__point .map-point__circle"),n=document.querySelectorAll(".find-map__point .map-point__text");c.forEach((t=>{const e=t.getAttribute("data-delay")?t.getAttribute("data-delay"):0,o=t.getAttribute("data-duration")?t.getAttribute("data-duration"):1.2;gsap.fromTo(t,{opacity:0},{opacity:1,delay:e,duration:o,ease:"power1.inOut",scrollTrigger:{trigger:".find-map",start:"top center"}})})),n.forEach((t=>{const e=t.getAttribute("data-delay")?t.getAttribute("data-delay"):0,o=t.getAttribute("data-duration")?t.getAttribute("data-duration"):1.2;gsap.fromTo(t,{opacity:0,y:"80%"},{y:0,opacity:1,delay:e,duration:o,ease:"power1.inOut",scrollTrigger:{trigger:".find-map",start:"top center"}})}));document.querySelectorAll(".descover__map .map-point__circle").forEach((t=>{const e=t.getAttribute("data-delay")?t.getAttribute("data-delay"):0,o=t.getAttribute("data-duration")?t.getAttribute("data-duration"):1.2;gsap.fromTo(t,{opacity:0},{opacity:1,delay:e,duration:o,ease:"power1.inOut",scrollTrigger:{trigger:".descover__map",start:"top top"}})}));const s=document.querySelector(".hero__title");transformTop(s);const d=document.querySelectorAll('[data-effect="fade-down"]'),u=document.querySelectorAll('[data-effect="fade-in"]');d.forEach((t=>{fadeDown(t)})),u.forEach((t=>{fadeIn(t)}));document.querySelectorAll(".flip").forEach((t=>{flipAnim(t)}));const p=document.querySelector(".description-reality__content");ScrollTrigger.create({trigger:".description-reality",pinned:!0,start:"top top",end:"bottom bottom",marker:!0,onToggle:t=>{return e=p,o=t.isActive,void(e.style.opacity=o?1:0);var e,o}});gsap.fromTo(".pvp__title",{scale:1.7},{scale:1,scrollTrigger:{trigger:".pvp",start:"top center",end:"center+=100px center",scrub:!0},ease:"none"});document.querySelectorAll(".pvp-show").forEach((t=>{gsap.fromTo(t,{opacity:0,y:"10%"},{opacity:1,y:0,scrollTrigger:{trigger:".pvp",start:"20%",end:"center",scrub:!0}})})),gsap.fromTo(".pvp",{opacity:1},{opacity:0,ease:"none",scrollTrigger:{trigger:".pvp",start:"center",end:"bottom middle",scrub:!0}}),gsap.fromTo(".collection__title",{x:"18%"},{x:"-40%",scrollTrigger:{trigger:".collection__title",start:"top bottom",end:"bottom",scrub:!0}}),Marquee3k.init(),gsap.fromTo(".hunger-games__title",{scale:1.7},{scale:1,scrollTrigger:{trigger:".hunger-games",start:"top bottom",end:"15% center",scrub:!0},ease:"none"}),gsap.utils.toArray(".hunger-games__map-point").forEach((t=>{pointShow(t,".hunger-games__map")}));const g=document.querySelector(".mission__line"),m=document.querySelector(".mission__line_diagonally");gsap.fromTo(g,{width:"0px"},{width:"100%",ease:"power1.inOut",scrollTrigger:{trigger:".mission"}}),gsap.fromTo(m,{width:"0px"},{width:"113%",ease:"power1.inOut",scrollTrigger:{trigger:".mission"}}),gsap.utils.toArray(".roadmap-item__line").forEach((t=>{leftToRight(t)})),gsap.utils.toArray(".security__row-line").forEach((t=>{leftToRight(t)})),gsap.utils.toArray(".team__row-line").forEach((t=>{leftToRight(t)})),gsap.fromTo(".roadmap__title",{scale:1.7},{scale:1,scrollTrigger:{trigger:".roadmap",start:"top bottom",end:"15% center",scrub:!0},ease:"none"});{const t=document.querySelectorAll(".vacancy__tabs-tab"),e=document.querySelectorAll(".vacancy__tabs-body"),o=()=>{t.forEach((t=>t.classList.remove("current")))},r=()=>{e.forEach((t=>t.classList.remove("show")))};t.forEach(((t,a)=>{t.addEventListener("click",(i=>{if(i.preventDefault(),t.closest(".current"))return;o(),t.classList.add("current");const l=document.querySelector(".vacancy__tabs-body.show"),c=e[a];hideElem(l),r(),c.classList.add("show"),showElem(c)}))})),gsap.utils.toArray(".vacancy__header-line").forEach((t=>{rightToLeft(t)}));const a=document.querySelector(".vacancy__header-line");leftToRight(a)}document.querySelectorAll(".question-item").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();e.target.closest(".question-item__header")&&t.classList.toggle("open")}))})),gsap.utils.toArray(".question-item__line").forEach((t=>{leftToRight(t)})),gsap.utils.toArray('[data-effect="draw-line"]').forEach((t=>{leftToRight(t)}));document.querySelectorAll('[data-effect="fade-up"]').forEach((t=>{fadeUp(t)}));document.querySelectorAll('[data-effect="scaling"]').forEach((t=>{scaling(t)}))})()};