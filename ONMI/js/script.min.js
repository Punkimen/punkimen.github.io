"use strict";import{sliderInit}from"./module/sliderInit.js";import{observerScroll}from"./module/scrollTrigerAnimation.js";import{splitText}from"./module/splitText.js";import{setStyle}from"./module/setStyle.js";import{fadeDown,fadeIn,flipAnim,lineShow,opacityIn,scalingPositive,transformTop}from"./module/GSAPAnim.js";import{CalcStats}from"./module/calcScore.js";window.onload=function(){(()=>{document.querySelectorAll(".animate");const e=document.querySelectorAll("[data-delay]"),t=document.querySelectorAll("[data-duration]");for(let t of e)setStyle(t,t.dataset);for(let e of t)setStyle(e,e.dataset);{const e={slidesPerView:"auto",spaceBetween:10,grabCursor:!0,speed:600,effect:"creative",parallax:!0,creativeEffect:{limitProgress:2,prev:{shadow:!0,translate:[0,0,-400],scale:[0],opacity:0},next:{translate:["calc(100% + 10px)",0,0]}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},t=sliderInit(".adventure__phone"),o=sliderInit(".cards-slider__slider",e);o.controller.control=t,console.log(o);const r=()=>{const e=o.slides,t=e[e.length-1];o.activeIndex===e.length-1?(t.style.right="9.7vw",t.style.transotionDuration="600ms"):(t.style.right="0vw",t.style.transotionDuration="600ms")};o.on("slideChange",(function(){r()}));const l=sliderInit(".create-omi__slider",{slidesPerView:5,centeredSlides:!0,loop:!0,allowTouchMove:!1,navigation:{nextEl:".create-omi__btn_next",prevEl:".create-omi__btn"}}),c=()=>{const e=l.slides,t=l.activeIndex;e[t].style.opacity=1;const o=o=>{let r=[];return r.push(e[t-o]),r.push(e[t+o]),r},r=o(1),c=o(2);r.forEach((e=>{e.style.opacity=.3})),c.forEach((e=>{e.style.opacity=.15}))};l.on("slideChange",(function(){c()})),c()}document.querySelectorAll(".animate-letters").forEach((e=>{splitText(e)}));document.querySelectorAll(".animate-text").forEach((e=>{splitText(e)}));document.querySelectorAll(".title-line").forEach((e=>{splitText(e)}));const o=document.querySelector(".omi-card__handle"),r=document.querySelector("#unallocated-points");const l=new CalcStats(12,10,23.4,2.1,2.1,56);l.render(),o.addEventListener("click",(async e=>{const t=e.target,o=t.closest(".omi-card__point-btn");if(o){const e=document.createElement("span");e.className="scalingBlock",e.setAttribute("data-id",1),r.append(e),await scalingPositive(".scalingBlock"),e.remove();const c=o.getAttribute("data-stat");t.classList.contains("btn-plus")?l.statPlus(c):t.classList.contains("btn-minus")&&l.statMinus(c)}})),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),1!==ScrollTrigger.isTouch&&ScrollSmoother.create({smooth:1.5,effects:!0,smoothTouch:.1});const c=document.querySelectorAll('[data-effect="line"]'),n=document.querySelectorAll('[data-effect="opacity"]');c.forEach((e=>{lineShow(e)})),n.forEach((e=>{opacityIn(e)}));const s=document.querySelector(".hero__title");transformTop(s);const a=document.querySelectorAll('[data-effect="fade-down"]'),i=document.querySelectorAll('[data-effect="fade-in"]');a.forEach((e=>{fadeDown(e)})),i.forEach((e=>{fadeIn(e)}));document.querySelectorAll(".flip").forEach((e=>{flipAnim(e)})),gsap.fromTo(".pvp__title",{scale:1.7},{scale:1,scrollTrigger:{trigger:".pvp",start:"top center",end:"center+=100px center",scrub:!0,markers:!0}});document.querySelectorAll(".pvp-show").forEach((e=>{gsap.fromTo(e,{opacity:0,y:"10%"},{opacity:1,y:0,scrollTrigger:{trigger:".pvp",start:"20%",end:"center",scrub:!0}})}))})()};